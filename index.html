<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calificaciones Modelo Centro INPONOR - PLE-RD</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìã Calificaciones Modelo Centro INPONOR - PLE-RD</h1>
            <p>Sistema de Evaluaci√≥n - Modelo de Naciones Unidas</p>
        </div>

        <!-- PANTALLA DE LOGIN -->
        <div id="loginScreen" class="login-screen">
            <div class="login-box">
                <h2>Acceso al Sistema</h2>
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="switchTab('admin')">üë®‚Äçüíº Admin</button>
                    <button class="tab-btn" onclick="switchTab('qr')">üì± QR Estudiante</button>
                </div>

                <!-- LOGIN ADMIN -->
                <div id="adminLogin">
                    <div class="input-group">
                        <label>Correo Electr√≥nico:</label>
                        <input type="email" id="emailInput" placeholder="tucorreo@gmail.com">
                    </div>
                    <div class="input-group">
                        <label>Contrase√±a:</label>
                        <input type="password" id="passwordInput" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <button class="btn btn-primary" onclick="loginAdmin()">Iniciar Sesi√≥n</button>
                </div>

                <!-- LOGIN QR -->
                <div id="qrLogin" class="hidden">
                    <div class="input-group">
                        <label>C√≥digo de Estudiante:</label>
                        <input type="text" id="studentCode" placeholder="Ej: OMT1-001">
                    </div>
                    <button class="btn btn-primary" onclick="loginStudent()">Ver Mis Calificaciones</button>
                </div>
            </div>
        </div>

        <!-- PANTALLA DE PASE DE LISTA POR PA√çSES (OBLIGATORIO) -->
        <div id="paseListaScreen" class="pase-lista-screen">
            <div class="pase-lista-container-compact">
                <div class="pase-lista-header-compact">
                    <h2>üìã Pase de Lista - Vista por Pa√≠ses</h2>
                    <div class="pase-lista-subtitle">
                        Grupo: <strong id="paseListaGroupCompact">OMT1</strong> ‚Ä¢ 
                        <span id="paseListaDateCompact"></span>
                    </div>
                    <p style="font-size: 11px; margin-top: 5px; opacity: 0.8;">
                        Marca el estado del pa√≠s completo. Todos los delegados cambiar√°n al mismo estado.
                    </p>
                </div>
                
                <div class="pase-lista-search-compact">
                    <input type="text" id="paseListaSearchCompact" 
                           placeholder="üîç Buscar pa√≠s..." 
                           autofocus>
                </div>
                
                <div class="pase-lista-stats-compact">
                    <div class="pase-lista-stat-compact">
                        <div class="pase-lista-stat-value-compact" id="totalPaisesCompact">0</div>
                        <div class="pase-lista-stat-label">Total Pa√≠ses</div>
                    </div>
                    <div class="pase-lista-stat-compact presente">
                        <div class="pase-lista-stat-value-compact" id="paisesPresentesCompact">0</div>
                        <div class="pase-lista-stat-label">Pa√≠ses Presentes</div>
                    </div>
                    <div class="pase-lista-stat-compact votando">
                        <div class="pase-lista-stat-value-compact" id="paisesVotandoCompact">0</div>
                        <div class="pase-lista-stat-label">Pa√≠ses Votando</div>
                    </div>
                    <div class="pase-lista-stat-compact ausente">
                        <div class="pase-lista-stat-value-compact" id="paisesAusentesCompact">0</div>
                        <div class="pase-lista-stat-label">Pa√≠ses Ausentes</div>
                    </div>
                </div>
                
                <div id="paseListaBodyCompact" style="max-height: 350px; overflow-y: auto; padding-right: 5px;">
                    <!-- Se llenar√° din√°micamente con los pa√≠ses -->
                </div>
                
                <div class="pase-lista-buttons-compact">
                    <button class="btn-guardar-compact" onclick="guardarPaseListaCompact()">üíæ Guardar</button>
                    <button class="btn-estudiantes-compact" onclick="irAPaseEstudiantes()">üë§ Ver por Estudiantes</button>
                    <button class="btn-continuar-compact" onclick="continuarAAdmin()">‚úÖ Continuar a Admin</button>
                    <button class="btn-cancelar-compact" onclick="cancelarPaseListaCompact()">‚úñÔ∏è Cancelar</button>
                </div>
            </div>
        </div>

        <!-- PANTALLA DE PASE DE LISTA POR ESTUDIANTES -->
        <div id="paseEstudiantesScreen" class="pase-estudiantes-screen">
            <div class="pase-lista-container-compact">
                <div class="pase-lista-header-compact" style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);">
                    <h2>üë§ Pase de Lista - Vista por Estudiantes</h2>
                    <div class="pase-lista-subtitle">
                        Grupo: <strong id="paseEstudiantesGroup">OMT1</strong> ‚Ä¢ 
                        <span id="paseEstudiantesDate"></span>
                    </div>
                    <p style="font-size: 11px; margin-top: 5px; opacity: 0.8;">
                        Marca el estado individual de cada estudiante.
                    </p>
                </div>
                
                <div class="pase-lista-search-compact">
                    <input type="text" id="paseEstudiantesSearch" 
                           placeholder="üîç Buscar por nombre, pa√≠s o c√≥digo..." 
                           autofocus>
                </div>
                
                <div class="pase-lista-stats-compact">
                    <div class="pase-lista-stat-compact">
                        <div class="pase-lista-stat-value-compact" id="totalEstudiantesDetallado">0</div>
                        <div class="pase-lista-stat-label">Total Estudiantes</div>
                    </div>
                    <div class="pase-lista-stat-compact presente">
                        <div class="pase-lista-stat-value-compact" id="estudiantesPresentesDetallado">0</div>
                        <div class="pase-lista-stat-label">Presentes</div>
                    </div>
                    <div class="pase-lista-stat-compact votando">
                        <div class="pase-lista-stat-value-compact" id="estudiantesVotandoDetallado">0</div>
                        <div class="pase-lista-stat-label">Votando</div>
                    </div>
                    <div class="pase-lista-stat-compact ausente">
                        <div class="pase-lista-stat-value-compact" id="estudiantesAusentesDetallado">0</div>
                        <div class="pase-lista-stat-label">Ausentes</div>
                    </div>
                </div>
                
                <div id="paseEstudiantesBody" style="max-height: 350px; overflow-y: auto; padding-right: 5px;">
                    <!-- Se llenar√° din√°micamente con los estudiantes -->
                </div>
                
                <div class="pase-lista-buttons-compact">
                    <button class="btn-guardar-compact" onclick="guardarPaseEstudiantes()">üíæ Guardar</button>
                    <button class="btn-continuar-compact" onclick="volverAPaises()">üìã Volver a Pa√≠ses</button>
                    <button class="btn-continuar-compact" onclick="continuarAAdmin()">‚úÖ Continuar a Admin</button>
                </div>
            </div>
        </div>

        <!-- VISTA ADMIN -->
        <div id="adminView" class="admin-view">
            <div class="admin-header" id="adminHeader">
                <!-- Se llena din√°micamente -->
            </div>

            <!-- INFORMACI√ìN DE PESOS BASADA EN LA R√öBRICA PLE-RD -->
            <div class="weights-info">
                <h3 style="font-size: 14px; margin-bottom: 5px;">üìä R√∫brica de Evaluaci√≥n PLE-RD - Competencias y Puntajes</h3>
                <div class="weights-grid">
                    <div class="weight-item"><strong>1. Investigaci√≥n y an√°lisis cr√≠tico (30 pts)</strong><br>‚Ä¢ Investigaci√≥n acad√©mica: 15 pts<br>‚Ä¢ Pensamiento cr√≠tico: 15 pts</div>
                    <div class="weight-item"><strong>2. Comunicaci√≥n y lenguaje (30 pts)</strong><br>‚Ä¢ Oratoria: 10 pts<br>‚Ä¢ Argumentaci√≥n: 10 pts<br>‚Ä¢ Redacci√≥n: 10 pts</div>
                    <div class="weight-item"><strong>3. Negociaci√≥n y resoluci√≥n de conflictos (20 pts)</strong><br>‚Ä¢ Negociaci√≥n: 10 pts<br>‚Ä¢ Resoluci√≥n de conflictos: 10 pts</div>
                    <div class="weight-item"><strong>4. Liderazgo y colaboraci√≥n (20 pts)</strong><br>‚Ä¢ Liderazgo: 10 pts<br>‚Ä¢ Colaboraci√≥n: 10 pts</div>
                </div>
            </div>

            <div class="controls-row">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="üîç Buscar estudiante..." onkeyup="searchStudents()">
                </div>
                
                <div class="sort-controls">
                    <label>Ordenar por:</label>
                    <select id="sortSelect" onchange="sortStudents()">
                        <option value="name">Nombre (A-Z)</option>
                        <option value="name-desc">Nombre (Z-A)</option>
                        <option value="code">C√≥digo</option>
                        <option value="pais">Pa√≠s</option>
                        <option value="grade">Calificaci√≥n (Mayor a Menor)</option>
                        <option value="grade-asc">Calificaci√≥n (Menor a Mayor)</option>
                    </select>
                </div>

                <div class="action-buttons">
                    <button class="btn-action btn-add" onclick="addStudent()">‚ûï Agregar</button>
                    <button class="btn-action btn-pase-paises" onclick="showPasePaisesDesdeAdmin()">üìã Pase por Pa√≠ses</button>
                    <button class="btn-action btn-pase-estudiantes" onclick="showPaseEstudiantesDesdeAdmin()">üë§ Pase por Estudiantes</button>
                    <button class="btn-action btn-export" onclick="exportToExcel()">üìä Excel</button>
                    <button class="btn-action btn-stats" onclick="showStatistics()">üìà Estad√≠sticas</button>
                    <button class="btn-action btn-save" onclick="saveData()">üíæ Guardar</button>
                </div>
            </div>

            <div class="excel-table-container">
                <table class="excel-table" id="gradesTable">
                    <thead>
                        <tr>
                            <th style="width: 40px;">#</th>
                            <th style="min-width: 180px;">Estudiante</th>
                            <th class="competencia-header" colspan="2">1. Investigaci√≥n y an√°lisis cr√≠tico (30 pts)</th>
                            <th class="competencia-header" colspan="3">2. Comunicaci√≥n y lenguaje (30 pts)</th>
                            <th class="competencia-header" colspan="2">3. Negociaci√≥n y resoluci√≥n de conflictos (20 pts)</th>
                            <th class="competencia-header" colspan="2">4. Liderazgo y colaboraci√≥n (20 pts)</th>
                            <th style="width: 90px;">PROMEDIO FINAL</th>
                            <th style="width: 130px;">Acciones</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th>Nombre, Pa√≠s y C√≥digo</th>
                            <th class="subcompetencia-header">Investigaci√≥n acad√©mica (15 pts)</th>
                            <th class="subcompetencia-header">Pensamiento cr√≠tico (15 pts)</th>
                            <th class="subcompetencia-header">Oratoria (10 pts)</th>
                            <th class="subcompetencia-header">Argumentaci√≥n (10 pts)</th>
                            <th class="subcompetencia-header">Redacci√≥n (10 pts)</th>
                            <th class="subcompetencia-header">Negociaci√≥n (10 pts)</th>
                            <th class="subcompetencia-header">Resoluci√≥n de conflictos (10 pts)</th>
                            <th class="subcompetencia-header">Liderazgo (10 pts)</th>
                            <th class="subcompetencia-header">Colaboraci√≥n (10 pts)</th>
                            <th>Nota /100</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="gradesBody">
                        <!-- Se llenar√° din√°micamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- VISTA ESTUDIANTE -->
        <div id="studentView" class="student-view">
            <div class="student-card">
                <h2 id="studentName">Nombre del Estudiante</h2>
                <p id="studentComite">Pa√≠s</p>
                <p style="font-size: 13px; margin-top: 8px;" id="studentCodeDisplay">C√≥digo</p>
            </div>
            
            <div class="grades-grid">
                <div class="grade-item">
                    <h3>üîç Investigaci√≥n y an√°lisis cr√≠tico</h3>
                    <div class="grade-value" id="grade1">0/30</div>
                    <p style="font-size: 12px; margin-top: 8px; color: #666;">
                        ‚Ä¢ Investigaci√≥n acad√©mica: <span id="detail1a">0</span>/15<br>
                        ‚Ä¢ Pensamiento cr√≠tico: <span id="detail1b">0</span>/15
                    </p>
                </div>
                <div class="grade-item">
                    <h3>üó£Ô∏è Comunicaci√≥n y lenguaje</h3>
                    <div class="grade-value" id="grade2">0/30</div>
                    <p style="font-size: 12px; margin-top: 8px; color: #666;">
                        ‚Ä¢ Oratoria: <span id="detail2a">0</span>/10<br>
                        ‚Ä¢ Argumentaci√≥n: <span id="detail2b">0</span>/10<br>
                        ‚Ä¢ Redacci√≥n: <span id="detail2c">0</span>/10
                    </p>
                </div>
                <div class="grade-item">
                    <h3>ü§ù Negociaci√≥n y resoluci√≥n de conflictos</h3>
                    <div class="grade-value" id="grade3">0/20</div>
                    <p style="font-size: 12px; margin-top: 8px; color: #666;">
                        ‚Ä¢ Negociaci√≥n: <span id="detail3a">0</span>/10<br>
                        ‚Ä¢ Resoluci√≥n de conflictos: <span id="detail3b">0</span>/10
                    </p>
                </div>
                <div class="grade-item">
                    <h3>üë• Liderazgo y colaboraci√≥n</h3>
                    <div class="grade-value" id="grade4">0/20</div>
                    <p style="font-size: 12px; margin-top: 8px; color: #666;">
                        ‚Ä¢ Liderazgo: <span id="detail4a">0</span>/10<br>
                        ‚Ä¢ Colaboraci√≥n: <span id="detail4b">0</span>/10
                    </p>
                </div>
            </div>
            
            <div class="final-grade-card">
                <h2>üèÜ CALIFICACI√ìN FINAL</h2>
                <div class="final-grade-value" id="studentFinalGrade">0</div>
                <p style="font-size: 14px; margin-top: 8px;">de 100 puntos</p>
            </div>
            <button class="btn btn-primary" style="margin-top: 20px;" onclick="logout()">Salir</button>
        </div>
    </div>

    <!-- MODAL QR -->
    <div id="qrModal" class="modal">
        <div class="modal-content">
            <h2>C√≥digo QR del Estudiante</h2>
            <p id="qrStudentName" style="margin-bottom: 10px; color: #666; font-size: 14px;"></p>
            <div id="qrcode"></div>
            <p style="font-size: 11px; color: #666; margin-top: 8px;">
                El estudiante puede escanear este c√≥digo para ver sus calificaciones
            </p>
            <button class="btn-close" onclick="closeQRModal()" style="background: #666; color: white;">Cerrar</button>
        </div>
    </div>

    <!-- MODAL EDITAR ESTUDIANTE -->
    <div id="editModal" class="modal">
        <div class="modal-content modal-edit">
            <h2>‚úèÔ∏è Editar Estudiante</h2>
            <div class="edit-form" id="editForm">
                <!-- Se llenar√° din√°micamente -->
            </div>
            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button class="btn-close" onclick="closeEditModal()" style="background: #666; color: white;">Cancelar</button>
                <button class="btn-close" onclick="saveEdit()" style="background: #4CAF50; color: white;">Guardar Cambios</button>
            </div>
        </div>
    </div>
    <script src="Script.js"></script>
</body>

</html>
